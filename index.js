import{a as q}from"./assets/vendor-4Zu4Mdgf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();const P="https://sound-wave.b.goit.study/api";async function B(e=10,n=1){try{return(await q.get(`${P}/artists`,{params:{limit:e,page:n}})).data}catch(l){throw console.error("Error fetching artist list:",l),l}}async function N(e){try{return(await q.get(`${P}/artists/${e}`)).data}catch(n){throw console.error(`Error fetching artist details with tracks (ID: ${e}):`,n),n}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero-column-one"),n=document.querySelector(".hero-column-two");async function l(){let r=[];try{r=(await B(6,1)).artists||[]}catch(a){console.error("Памылка пры загрузцы артыстаў для Hero-секцыі:",a)}if(r.length===0){console.warn("Няма дадзеных пра артыстаў для адлюстравання ў Hero-секцыі. Праверце API ці даступнасць дадзеных.");return}const d=r.slice(0,3),o=r.slice(3,6);function c(a,b){const p=a.querySelectorAll(".hero-artist-img");b.forEach((k,T)=>{p[T]&&(p[T].src=k.strArtistThumb||"https://via.placeholder.com/150x150?text=No+Image",p[T].alt=k.strArtist||"Artist photo")})}e&&c(e,d),n&&c(n,o)}l();const s=document.querySelector(".explore-btn"),t=document.getElementById("artists-section");s&&t?s.addEventListener("click",r=>{t.scrollIntoView({behavior:"smooth"})}):t||console.warn('Секцыя з ID "artists-section" не знойдзена для кнопкі Explore.')});const i=document.getElementById("artistModal"),x=i?i.querySelector(".close-modal"):null,A=document.getElementById("modalLoader"),h=i?i.querySelector(".hero-artist-img"):null,M=i?i.querySelector(".modal-title"):null,y=i?i.querySelector(".artist-info-list"):null,g=i?i.querySelector(".artist-info-bio-text"):null,f=i?i.querySelector(".genres-list"):null,m=i?i.querySelector(".artist-albums-list"):null;let C=[],E=1;const H=8;function $(){i&&i.classList.remove("open"),document.body&&document.body.classList.remove("modal-open"),M&&(M.textContent="Назва выканаўцы"),h&&(h.src="",h.alt=""),y&&(y.innerHTML=""),g&&(g.innerHTML=""),f&&(f.innerHTML=""),m&&(m.innerHTML=""),A&&(A.style.display="none");const e=i.querySelector(".pagination-controls");e&&e.remove()}function O(e){e.target===i&&$()}function R(e){e.key==="Escape"&&$()}function I(e){if(!m)return;const n=(e-1)*H,l=n+H,s=C.slice(n,l);if(m.innerHTML="",s.length===0){m.innerHTML='<li class="artist-albums-item"><p>Інфармацыя пра альбомы адсутнічае.</p></li>';const o=i.querySelector(".pagination-controls");o&&o.remove();return}s.forEach(o=>{let c=`<li class="artist-albums-item">
                                <h3>${o.strAlbum||"Назва альбому"} (${o.intYearReleased||"Год"})</h3>
                                <ul class="album-track-list">`;c+=`<li class="album-track-item track-header">
                                <ul class="track-info-list">
                                    <li class="track-info-item">Трэк</li>
                                    <li class="track-info-item">Час</li>
                                    <li class="track-info-item">Спасылка</li>
                                </ul>
                            </li>`,o.tracks&&o.tracks.length>0?o.tracks.forEach((a,b)=>{const p=b%2===0?"even-row":"odd-row";c+=`<li class="album-track-item ${p}">
                                        <ul class="track-info-list">
                                            <li class="track-info-item">${a.strTrack||"Назва кампазіцыі"}</li>
                                            <li class="track-info-item">${a.intDuration?Y(a.intDuration):"-"}</li>
                                            <li class="track-info-item">`,a.movie&&typeof a.movie=="string"&&a.movie!=="null"&&(a.movie.startsWith("http://")||a.movie.startsWith("https://"))?c+=`<button class="yt-button" data-url="${a.movie}">YouTube</button>`:c+="-",c+=`</li>
                                        </ul>
                                    </li>`}):c+='<li class="album-track-item"><p>Няма кампазіцый для гэтага альбому.</p></li>',c+="</ul></li>",m.insertAdjacentHTML("beforeend",c)});const t=Math.ceil(C.length/H),r=i.querySelector(".pagination-controls");if(r&&r.remove(),t>1){const o=document.createElement("div");o.className="pagination-controls";const c=document.createElement("button");c.textContent="Папярэдняя",c.disabled=e===1,c.addEventListener("click",()=>{E--,I(E)});const a=document.createElement("button");a.textContent="Наступная",a.disabled=e===t,a.addEventListener("click",()=>{E++,I(E)});const b=document.createElement("span");b.textContent=` ${e} / ${t} `,o.appendChild(c),o.appendChild(b),o.appendChild(a);const p=i.querySelector(".artist-albums-block");p?p.appendChild(o):i.appendChild(o)}i.querySelectorAll(".yt-button").forEach(o=>{o.addEventListener("click",function(c){const a=c.target.dataset.url;a&&window.open(a,"_blank")})})}function Y(e){const n=typeof e=="string"?parseInt(e,10):e;if(typeof n!="number"||isNaN(n)||n<0)return"N/A";const l=Math.floor(n/1e3),s=Math.floor(l/60),t=l%60;return`${s}:${t<10?"0":""}${t}`}async function j(e,n=[]){if(!i||!A||!M||!h||!y||!g||!f||!m){console.error("Адзін або некалькі элементаў мадальнага акна не знойдзены ў DOM. Праверце свае HTML ID і класы.");return}document.body.classList.add("modal-open"),i.classList.add("open"),A.style.display="block",M.textContent="Загрузка...",h.src="",h.alt="",y.innerHTML="",g.innerHTML="",f.innerHTML="",m.innerHTML="",E=1,C=[];const l=i.querySelector(".pagination-controls");l&&l.remove();try{const s=await N(e);if(A.style.display="none",M.textContent=s.strArtist||"Невядомы выканаўца",h.src=s.strArtistThumb||"https://via.placeholder.com/250x250.png?text=No+Image",h.alt=s.strArtist||"Фота выканаўцы",y.innerHTML=`
                <li class="artist-info-item">
                    <h3>Гады актыўнасці</h3>
                    <p class="artist-info">${s.intFormedYear||"інфармацыя адсутнічае"}</p>
                </li>
                <li class="artist-info-item">
                    <h3>Пол</h3>
                    <p class="artist-info">${s.strGender||"інфармацыя адсутнічае"}</p>
                </li>
                <li class="artist-info-item">
                    <h3>Удзельнікі</h3>
                    <p class="artist-info">${s.intMembers||"інфармацыя адсутнічае"}</p>
                </li>
                <li class="artist-info-item">
                    <h3>Краіна</h3>
                    <p class="artist-info">${s.strCountry||"інфармацыя адсутнічае"}</p>
                </li>
            `,g.innerHTML=s.strBiographyEN||"Біяграфія адсутнічае.",f.innerHTML="",n&&Array.isArray(n)&&n.length>0)n.forEach(t=>{const r=document.createElement("li");r.className="ganres-item",r.textContent=t,f.appendChild(r)});else{const t=document.createElement("li");t.className="ganres-item",t.textContent="Жанры адсутнічаюць",f.appendChild(t)}if(s.tracksList&&s.tracksList.length>0){const t=new Map;s.tracksList.forEach(r=>{const d=r.strAlbum||"Невядомы альбом",o=r.idAlbum||d;t.has(o)||t.set(o,{strAlbum:d,intYearReleased:r.intYearReleased||"Невядома",idAlbum:o,tracks:[]}),t.get(o).tracks.push(r)}),C=Array.from(t.values()).sort((r,d)=>{const o=parseInt(r.intYearReleased)||0;return(parseInt(d.intYearReleased)||0)-o}),I(E)}else{m.innerHTML='<li class="artist-albums-item"><p>Інфармацыя пра альбомы і трэкі адсутнічае.</p></li>';const t=i.querySelector(".pagination-controls");t&&t.remove()}}catch(s){if(A.style.display="none",i){M.textContent="Памылка загрузкі дадзеных!";let t="На жаль, не ўдалося загрузіць дадзеныя пра выканаўцу. ";s.response?(t+=`Статус: ${s.response.status}. `,s.response.status===404?t+="Рэсурс не знойдзены па паказаным URL. Магчыма, няверны ID або API-шлях. Паспрабуйце іншы ID ці праверце дакументацыю API.":s.response.data&&s.response.data.message&&(t+=`Паведамленне: ${s.response.data.message}`)):s.request?t+="Не ўдалося атрымаць адказ ад сервера. Магчыма, праблема з сеткай.":t+=`Паведамленне: ${s.message}`,y&&(y.innerHTML=`<li class="artist-info-item"><p class="error">${t}</p></li>`),g&&(g.innerHTML=""),f&&(f.innerHTML=""),m&&(m.innerHTML="")}console.error("Памылка атрымання дадзеных:",s)}}document.addEventListener("DOMContentLoaded",()=>{x&&x.addEventListener("click",$),i&&i.addEventListener("click",O),document.addEventListener("keydown",R)});const w=document.getElementById("artists-cards-container"),L=document.querySelector(".load-more-btn");let u=null,v=1;const S=8;function _(e){const n=Array.isArray(e.genres)?e.genres.map(s=>`<li class="artist-genre-item">${s}</li>`).join(""):'<li class="artist-genre-item">Невядома</li>',l=e.strBiographyEN?e.strBiographyEN.split(". ").slice(0,2).join(". ")+".":"Кароткі апісанне адсутнічае.";return`
    <li class="artist-item" data-artist-id="${e._id}">
      <img src="${e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image"}"
           alt="${e.strArtist||"Фота выканаўцы"}"
           class="artist-img">
      <ul class="artist-genres-list">
        ${n}
      </ul>
      <h3 class="artist-name">${e.strArtist||"Невядомы выканаўца"}</h3>
      <p class="artist-description">${l}</p>
      <button type="button" class="learn-more-btn button">Детальніше</button>
    </li>
  `}function W(e,n=!1){if(!w){console.error("Элемент #artists-cards-container не знойдзены ў DOM.");return}u||(u=document.createElement("ul"),u.classList.add("artists-list"),w.appendChild(u)),n&&(u.innerHTML="");const l=e.map(_).join("");u.insertAdjacentHTML("beforeend",l),u.querySelectorAll(".learn-more-btn").forEach(s=>{s.addEventListener("click",t=>{const r=t.target.closest(".artist-item");if(r){const d=r.dataset.artistId,o=e.find(a=>a._id===d),c=o?o.genres:[];d?j(d,c):console.warn('Кнопка "Детальніше" не мае data-artist-id.')}})})}async function D(e=!1){e&&(v=1,u&&(u.innerHTML=""));try{const n=await B(S,v),l=n.artists||[],s=n.totalArtists||0;W(l,e),L&&(v*S>=s?L.classList.add("is-hidden"):L.classList.remove("is-hidden"))}catch(n){console.error("Памылка пры загрузцы артыстаў:",n),L&&L.classList.add("is-hidden"),u&&u.innerHTML===""&&(u.innerHTML='<li class="artist-item"><p>Не ўдалося загрузіць выканаўцаў. Паспрабуйце пазней.</p></li>')}}L&&L.addEventListener("click",()=>{v+=1,D(!1)});document.addEventListener("DOMContentLoaded",()=>{D(!0)});
//# sourceMappingURL=index.js.map
