import{a as $,S as N}from"./assets/vendor-CWXYtbPv.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const x="https://sound-wave.b.goit.study/api";async function B(e=10,n=1){try{return(await $.get(`${x}/artists`,{params:{limit:e,page:n}})).data}catch(o){throw console.error("Error fetching artist list:",o),o}}async function O(e){try{return(await $.get(`${x}/artists/${e}`)).data}catch(n){throw console.error(`Error fetching artist details with tracks (ID: ${e}):`,n),n}}async function R(e=10,n=1){try{return(await $.get(`${x}/feedbacks`,{params:{limit:e,page:n}})).data}catch(o){throw console.error("Error fetching feedback list:",o),o}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero-column-one"),n=document.querySelector(".hero-column-two");async function o(){let r=[];try{r=(await B(6,1)).artists||[]}catch(l){console.error("Памылка пры загрузцы артыстаў для Hero-секцыі:",l)}if(r.length===0){console.warn("Няма дадзеных пра артыстаў для адлюстравання ў Hero-секцыі. Праверце API ці даступнасць дадзеных.");return}const d=r.slice(0,3),a=r.slice(3,6);function c(l,L){const p=l.querySelectorAll(".hero-artist-img");L.forEach((I,w)=>{p[w]&&(p[w].src=I.strArtistThumb||"https://via.placeholder.com/150x150?text=No+Image",p[w].alt=I.strArtist||"Artist photo")})}e&&c(e,d),n&&c(n,a)}o();const s=document.querySelector(".explore-btn"),t=document.getElementById("artists-section");s&&t?s.addEventListener("click",r=>{t.scrollIntoView({behavior:"smooth"})}):t||console.warn('Секцыя з ID "artists-section" не знойдзена для кнопкі Explore.')});const i=document.getElementById("artistModal"),S=i?i.querySelector(".close-modal"):null,A=document.getElementById("modalLoader"),h=i?i.querySelector(".hero-artist-img"):null,M=i?i.querySelector(".modal-title"):null,g=i?i.querySelector(".artist-info-list"):null,y=i?i.querySelector(".artist-info-bio-text"):null,m=i?i.querySelector(".genres-list"):null,f=i?i.querySelector(".artist-albums-list"):null;let k=[],v=1;const C=8;function H(){i&&i.classList.remove("open"),document.body&&document.body.classList.remove("modal-open"),M&&(M.textContent="Назва выканаўцы"),h&&(h.src="",h.alt=""),g&&(g.innerHTML=""),y&&(y.innerHTML=""),m&&(m.innerHTML=""),f&&(f.innerHTML=""),A&&(A.style.display="none");const e=i.querySelector(".pagination-controls");e&&e.remove()}function Y(e){e.target===i&&H()}function j(e){e.key==="Escape"&&H()}function T(e){if(!f)return;const n=(e-1)*C,o=n+C,s=k.slice(n,o);if(f.innerHTML="",s.length===0){f.innerHTML='<li class="artist-albums-item"><p>Інфармацыя пра альбомы адсутнічае.</p></li>';const a=i.querySelector(".pagination-controls");a&&a.remove();return}s.forEach(a=>{let c=`<li class="artist-albums-item">
                                <h3>${a.strAlbum||"Назва альбому"} (${a.intYearReleased||"Год"})</h3>
                                <ul class="album-track-list">`;c+=`<li class="album-track-item track-header">
                                <ul class="track-info-list">
                                    <li class="track-info-item">Трэк</li>
                                    <li class="track-info-item">Час</li>
                                    <li class="track-info-item">Спасылка</li>
                                </ul>
                            </li>`,a.tracks&&a.tracks.length>0?a.tracks.forEach((l,L)=>{const p=L%2===0?"even-row":"odd-row";c+=`<li class="album-track-item ${p}">
                                        <ul class="track-info-list">
                                            <li class="track-info-item">${l.strTrack||"Назва кампазіцыі"}</li>
                                            <li class="track-info-item">${l.intDuration?F(l.intDuration):"-"}</li>
                                            <li class="track-info-item">`,l.movie&&typeof l.movie=="string"&&l.movie!=="null"&&(l.movie.startsWith("http://")||l.movie.startsWith("https://"))?c+=`<button class="yt-button" data-url="${l.movie}">YouTube</button>`:c+="-",c+=`</li>
                                        </ul>
                                    </li>`}):c+='<li class="album-track-item"><p>Няма кампазіцый для гэтага альбому.</p></li>',c+="</ul></li>",f.insertAdjacentHTML("beforeend",c)});const t=Math.ceil(k.length/C),r=i.querySelector(".pagination-controls");if(r&&r.remove(),t>1){const a=document.createElement("div");a.className="pagination-controls";const c=document.createElement("button");c.textContent="Папярэдняя",c.disabled=e===1,c.addEventListener("click",()=>{v--,T(v)});const l=document.createElement("button");l.textContent="Наступная",l.disabled=e===t,l.addEventListener("click",()=>{v++,T(v)});const L=document.createElement("span");L.textContent=` ${e} / ${t} `,a.appendChild(c),a.appendChild(L),a.appendChild(l);const p=i.querySelector(".artist-albums-block");p?p.appendChild(a):i.appendChild(a)}i.querySelectorAll(".yt-button").forEach(a=>{a.addEventListener("click",function(c){const l=c.target.dataset.url;l&&window.open(l,"_blank")})})}function F(e){const n=typeof e=="string"?parseInt(e,10):e;if(typeof n!="number"||isNaN(n)||n<0)return"N/A";const o=Math.floor(n/1e3),s=Math.floor(o/60),t=o%60;return`${s}:${t<10?"0":""}${t}`}async function _(e,n=[]){if(!i||!A||!M||!h||!g||!y||!m||!f){console.error("Адзін або некалькі элементаў мадальнага акна не знойдзены ў DOM. Праверце свае HTML ID і класы.");return}document.body.classList.add("modal-open"),i.classList.add("open"),A.style.display="block",M.textContent="Загрузка...",h.src="",h.alt="",g.innerHTML="",y.innerHTML="",m.innerHTML="",f.innerHTML="",v=1,k=[];const o=i.querySelector(".pagination-controls");o&&o.remove();try{const s=await O(e);if(A.style.display="none",M.textContent=s.strArtist||"Невядомы выканаўца",h.src=s.strArtistThumb||"https://via.placeholder.com/250x250.png?text=No+Image",h.alt=s.strArtist||"Фота выканаўцы",g.innerHTML=`
                <li class="artist-info-item">
                    <h3>Гады актыўнасці</h3>
                    <p class="artist-info">${s.intFormedYear||"інфармацыя адсутнічае"}</p>
                </li>
                <li class="artist-info-item">
                    <h3>Пол</h3>
                    <p class="artist-info">${s.strGender||"інфармацыя адсутнічае"}</p>
                </li>
                <li class="artist-info-item">
                    <h3>Удзельнікі</h3>
                    <p class="artist-info">${s.intMembers||"інфармацыя адсутнічае"}</p>
                </li>
                <li class="artist-info-item">
                    <h3>Краіна</h3>
                    <p class="artist-info">${s.strCountry||"інфармацыя адсутнічае"}</p>
                </li>
            `,y.innerHTML=s.strBiographyEN||"Біяграфія адсутнічае.",m.innerHTML="",n&&Array.isArray(n)&&n.length>0)n.forEach(t=>{const r=document.createElement("li");r.className="ganres-item",r.textContent=t,m.appendChild(r)});else{const t=document.createElement("li");t.className="ganres-item",t.textContent="Жанры адсутнічаюць",m.appendChild(t)}if(s.tracksList&&s.tracksList.length>0){const t=new Map;s.tracksList.forEach(r=>{const d=r.strAlbum||"Невядомы альбом",a=r.idAlbum||d;t.has(a)||t.set(a,{strAlbum:d,intYearReleased:r.intYearReleased||"Невядома",idAlbum:a,tracks:[]}),t.get(a).tracks.push(r)}),k=Array.from(t.values()).sort((r,d)=>{const a=parseInt(r.intYearReleased)||0;return(parseInt(d.intYearReleased)||0)-a}),T(v)}else{f.innerHTML='<li class="artist-albums-item"><p>Інфармацыя пра альбомы і трэкі адсутнічае.</p></li>';const t=i.querySelector(".pagination-controls");t&&t.remove()}}catch(s){if(A.style.display="none",i){M.textContent="Памылка загрузкі дадзеных!";let t="На жаль, не ўдалося загрузіць дадзеныя пра выканаўцу. ";s.response?(t+=`Статус: ${s.response.status}. `,s.response.status===404?t+="Рэсурс не знойдзены па паказаным URL. Магчыма, няверны ID або API-шлях. Паспрабуйце іншы ID ці праверце дакументацыю API.":s.response.data&&s.response.data.message&&(t+=`Паведамленне: ${s.response.data.message}`)):s.request?t+="Не ўдалося атрымаць адказ ад сервера. Магчыма, праблема з сеткай.":t+=`Паведамленне: ${s.message}`,g&&(g.innerHTML=`<li class="artist-info-item"><p class="error">${t}</p></li>`),y&&(y.innerHTML=""),m&&(m.innerHTML=""),f&&(f.innerHTML="")}console.error("Памылка атрымання дадзеных:",s)}}document.addEventListener("DOMContentLoaded",()=>{S&&S.addEventListener("click",H),i&&i.addEventListener("click",Y),document.addEventListener("keydown",j)});const P=document.getElementById("artists-cards-container"),b=document.querySelector(".load-more-btn");let u=null,E=1;const q=8;function V(e){const n=Array.isArray(e.genres)?e.genres.map(s=>`<li class="artist-genre-item">${s}</li>`).join(""):'<li class="artist-genre-item">Невядома</li>',o=e.strBiographyEN?e.strBiographyEN.split(". ").slice(0,2).join(". ")+".":"Кароткі апісанне адсутнічае.";return`
    <li class="artist-item" data-artist-id="${e._id}">
      <img src="${e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image"}"
           alt="${e.strArtist||"Фота выканаўцы"}"
           class="artist-img">
      <ul class="artist-genres-list">
        ${n}
      </ul>
      <h3 class="artist-name">${e.strArtist||"Невядомы выканаўца"}</h3>
      <p class="artist-description">${o}</p>
      <button type="button" class="learn-more-btn button">Детальніше</button>
    </li>
  `}function W(e,n=!1){if(!P){console.error("Элемент #artists-cards-container не знойдзены ў DOM.");return}u||(u=document.createElement("ul"),u.classList.add("artists-list"),P.appendChild(u)),n&&(u.innerHTML="");const o=e.map(V).join("");u.insertAdjacentHTML("beforeend",o),u.querySelectorAll(".learn-more-btn").forEach(s=>{s.addEventListener("click",t=>{const r=t.target.closest(".artist-item");if(r){const d=r.dataset.artistId,a=e.find(l=>l._id===d),c=a?a.genres:[];d?_(d,c):console.warn('Кнопка "Детальніше" не мае data-artist-id.')}})})}async function D(e=!1){e&&(E=1,u&&(u.innerHTML=""));try{const n=await B(q,E),o=n.artists||[],s=n.totalArtists||0;W(o,e),b&&(E*q>=s?b.classList.add("is-hidden"):b.classList.remove("is-hidden"))}catch(n){console.error("Памылка пры загрузцы артыстаў:",n),b&&b.classList.add("is-hidden"),u&&u.innerHTML===""&&(u.innerHTML='<li class="artist-item"><p>Не ўдалося загрузіць выканаўцаў. Паспрабуйце пазней.</p></li>')}}b&&b.addEventListener("click",()=>{E+=1,D(!1)});document.addEventListener("DOMContentLoaded",()=>{D(!0)});const z=document.querySelector(".swiper-wrapper");async function K(){try{const n=(await R(10,1)).data;if(!n||n.length===0){console.log("No feedback data received.");return}n.forEach(({rating:o,descr:s,name:t})=>{const r=U({rating:o,text:s,user:t});z.appendChild(r)}),Q()}catch(e){console.error("Error initializing feedback section:",e)}}function U({rating:e,text:n,user:o}){const s=document.createElement("div");s.classList.add("swiper-slide");const t=Math.round(e);return s.innerHTML=`
    <div class="feedback-card">
      <div class="feedback-stars">${J(t)}</div>
      <p class="feedback-text">"${n}"</p>
      <p class="feedback-user">${o}</p>
    </div>
  `,s}function J(e){return"★".repeat(e)+"☆".repeat(5-e)}function Q(){new N(".feedback-swiper",{loop:!1,grabCursor:!0,pagination:{el:".feedback-pagination",clickable:!0},navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:20},1440:{slidesPerView:3,spaceBetween:30}}})}K();
//# sourceMappingURL=index.js.map
